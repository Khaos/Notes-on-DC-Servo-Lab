%% LyX 1.6.10 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[10pt,a4paper,british]{article}
\usepackage[]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{bm}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
\pdfpageheight\paperheight
\pdfpagewidth\paperwidth


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
 \usepackage[headings]{DJespcrc1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
%\input{DJcommonpk-phd1-pgf-en}
%\input{DJcommonpk-pgf-en}

% Definition of command \djphd
\input{DJ4DJespcrc}

% Commonly used mathematical macro
%\input{DJcommonmath}
% identification
%\readRCS $Id: ModifiedFICA.tex,v 0.01 2009/06/15 15:20:11 Exp $
%\ProvidesFile{ModifiedFICA.tex}[\filedate \space v\fileversion
%     \space DJElsevier 1-column CRC Author Instructions]
\readRCS $Id: DJACS220Notes.tex,v 0.01 2010/02/20 15:20:11 Exp $
\ProvidesFile{DJACS220Notes.tex}[\filedate \space v\fileversion
     \space DJElsevier 1-column CRC Author Instructions]



% This package is not declared in DJespcrc1.sty
%\usepackage[numbers, sort&compress]{natbib}
% pdfsync.sty allows one to synchronize between LaTeX source and pdf output
%\usepackage{pdfsync}

%% !!! Comment
%%     The package 'xcolor' has to be loaded before the package 'pstricks'.
\usepackage[svgnames]{xcolor}



% change this to the following line for use with LaTeX2.09
% \documentstyle[12pt,twoside,fleqn,espcrc1]{article}
% if you want to include PostScript figures
%\usepackage{graphicx}
% if you have landscape tables
%\usepackage[figuresright]{rotating}
% Put all the style files and packages you want here
% Load DJ-defined report packages
\input{DJReportLoadAll}
\usepackage{pst-pdf}

%\usepackage{amsmath}

\usepackage{mathtools}

\usepackage{siunitx}

% \usepackage{djschemabloc}


\usetikzlibrary{circuits,%
    intersections,%
    scopes, arrows, fadings, patterns,%
    decorations.pathreplacing,%
    decorations.pathmorphing,%
    positioning,
    shadows,
}


\usepackage{pgfplots}
\input{defpgfexternal.tex}

\setpgfexternalmainfile{NotesonProjectsPartII}

\usepackage[style=altlong4colheader,toc]{glossaries}

\setlength{\glsdescwidth}{0.5\textwidth}
\setlength{\glspagelistwidth}{0.15\textwidth}

\makeglossaries

\renewcommand*{\glsgroupskip}{}

\loadglsentries{NotesonProjectsPartII-Znotation}


%\renewcommand{\jot}{2\jot}

% For command \textdegree, \textcelsius, ect.

\DeclareMathOperator \J {J}

\ifpdf
\graphicspath{{./}{./Fig/pdf/}{./Fig/}}
\else
\graphicspath{{./}{./Fig/eps/}{./Fig/}}
\fi

\makeatother

\usepackage{babel}

\begin{document}

\title{Notes on Magnetic Levitation System Laboratory}


\author{Dazhi Jiang}

\maketitle

\runtitle{Notes on Magnetic Levitation System Laboratory}


\runauthor{Dazhi Jiang}


\section{Introduction}

This document includes some notes on the magnetic levitation system
laboratory (ACS220).


\section{Notes}


\subsection{The model of magnetic levitation system}


\subsubsection{Equations of motion}

The dynamical equation of the system is given by\begin{equation}
m\ddot{h}=mg-f,\label{eq:maglev-model}\end{equation}
where $f$ denotes the electromagnetic force and given by\begin{equation}
f=k_{m}\frac{i^{2}}{h^{2}}.\label{eq:force}\end{equation}
Thus, we have\begin{equation}
m\ddot{h}=mg-k_{m}\frac{i^{2}}{h^{2}}.\end{equation}


Note that at the steady-state $\ddot{h}=0$. Hence, $mg-k_{m}\frac{i_{0}^{2}}{h_{0}^{2}}=0$
and \begin{equation}
i_{0}=\sqrt{\frac{mg}{k_{m}}}h_{0},\label{eq:steadystateio}\end{equation}
or \begin{equation}
h_{0}=\sqrt{\frac{k_{m}}{mg}}i_{0},\label{eq:steadystateoi}\end{equation}
 where $h_{0}$ and $i_{0}$ are the steady-state values.

Let\begin{eqnarray}
x_{1} & = & h-h_{0},\\
x_{2} & = & \dot{x}_{1}.\end{eqnarray}
and we have\begin{eqnarray}
\dot{x}_{1} & = & x_{2},\\
\dot{x}_{2} & = & g-\frac{k_{m}(i_{\Delta}+i_{0})^{2}}{m(x_{1}+h_{0})^{2}}.\end{eqnarray}



\subsubsection{Linearisation}

By linearising the system function around the point\begin{eqnarray}
x_{1} & = & 0,\\
x_{2} & = & 0,\\
i_{\Delta} & = & 0,\end{eqnarray}
 we have \begin{eqnarray}
\dot{x}_{1} & = & x_{2},\\
\dot{x}_{2} & = & \frac{2k_{m}(i_{\Delta}+i_{0})^{2}}{m(x_{1}+h_{0})^{3}}\Bigg|_{x_{1}=0,\, x_{2}=0,\, i_{\Delta}=0}\cdot x_{1}-\frac{2k_{m}(i_{\Delta}+i_{0})}{m(x_{1}+h_{0})^{2}}\Bigg|_{x_{1}=0,\, x_{2}=0,\, i_{\Delta}=0}\cdot i_{\Delta}.\end{eqnarray}
Simplifying the equation gives \begin{eqnarray}
\dot{x}_{1} & = & x_{2},\\
\dot{x}_{2} & = & \frac{2k_{m}i_{0}^{2}}{mh_{0}^{3}}\cdot x_{1}-\frac{2k_{m}i_{0}}{mh_{0}^{2}}\cdot i_{\Delta}.\end{eqnarray}


Finally, we obtain the \emph{state-space representation} of the system
\begin{equation}
\dot{\bm{x}}=A\bm{x}+Bi_{\Delta}\end{equation}
 where $\bm{x}=(x_{1},\, x_{2})^{T}$ and \begin{eqnarray}
A & = & \left[\begin{array}{rr}
0 & 1\\
\frac{2k_{m}i_{0}^{2}}{mh_{0}^{3}} & 0\end{array}\right],\\
B & = & \left[\begin{array}{c}
0\\
-\frac{2k_{m}i_{0}}{mh_{0}^{2}}\end{array}\right].\end{eqnarray}
 Note that Equation~\ref{eq:steadystateio} (or Equation~\ref{eq:steadystateoi}),
we have \begin{eqnarray}
A & = & \left[\begin{array}{rr}
0 & 1\\
\frac{2g}{h_{0}} & 0\end{array}\right],\\
B & = & \left[\begin{array}{c}
0\\
-\frac{2g}{i_{0}}\end{array}\right].\end{eqnarray}


The transfer function of the system from the input $u(t)=i_{\Delta}(t)$
to the output $y(t)=x_{1}(t)$ is\begin{equation}
G(s)=\frac{Y(s)}{U(s)}=C(sI-A)^{-1}B+D,\end{equation}
 where $C=\left[\begin{array}{cc}
1 & 0\end{array}\right]$ and $D=0$. The \emph{transfer function} is given by \begin{eqnarray}
G(s) & = & \left[\begin{array}{cc}
1 & 0\end{array}\right]\left[\begin{array}{rr}
s & -1\\
-\frac{2g}{h_{0}} & s\end{array}\right]^{-1}\left[\begin{array}{c}
0\\
-\frac{2g}{i_{0}}\end{array}\right]\nonumber \\
 & = & \frac{1}{s^{2}-\frac{2g}{h_{0}}}\left[\begin{array}{cc}
1 & 0\end{array}\right]\left[\begin{array}{rr}
s & 1\\
\frac{2g}{h_{0}} & s\end{array}\right]\left[\begin{array}{c}
0\\
-\frac{2g}{i_{0}}\end{array}\right]\nonumber \\
 & = & \frac{-\frac{2g}{i_{0}}}{s^{2}-\frac{2g}{h_{0}}}=\frac{-\frac{2mg}{i_{0}}}{ms^{2}-\frac{2mg}{h_{0}}}\end{eqnarray}


Substituting $g=9.80665$, $i_{0}=0.75$ and $h_{0}=15\times10^{-3}$
into the above equation, we obtain\begin{equation}
G(s)=\frac{-26.1511}{s^{2}-1307.6}=\frac{-0.5544}{0.0212s^{2}-27.7201}\end{equation}



\subsection{Stability Analysis}

Obviously the open-loop system is unstable due to the positive pole
in the transfer function


\subsection{Controller Design}


\subsubsection{PID}
\begin{enumerate}
\item Open \emph{PID\_real\_time.mdl}.
\item Adjust the parameters.
\item Build the model and run. if any error occurs like, {}``Error occurred
while executing External Mode MEX-file 'rtwinext': External mode package
buffer too small.'', you need reconnect and run. In addition, you
need lift the ball to the initial position so that it can keep the
position.
\end{enumerate}

\subsubsection{Linear quadratic regulator method}


\paragraph{Offiline analysis}
\begin{enumerate}
\item Open \emph{LQR\_offline.mdl}.
\item Adjust the parameters.
\item Build the model and run. if any error occurs like, {}``Error occurred
while executing External Mode MEX-file 'rtwinext': External mode package
buffer too small.'', you need reconnect and run. In addition, you
need lift the ball to the initial position so that it can keep the
position.
\end{enumerate}

\paragraph{Realtime control}
\begin{enumerate}
\item Open \emph{LQR\_real\_time.mdl}.
\item Adjust the parameters.
\item Build the model and run. if any error occurs like, {}``Error occurred
while executing External Mode MEX-file 'rtwinext': External mode package
buffer too small.'', you need reconnect and run. In addition, you
need lift the ball to the initial position so that it can keep the
position.
\end{enumerate}

\section{Some Keywords}


\section{Conclusions}

{
\renewcommand{\arraystretch}{1.1} % Vertical space between table lines
\renewcommand*{\symbolname}{Value}
\printglossary[title=List of Notations, toctitle=List of Notations]
}


\section*{Tmp}
\end{document}
